
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
		<title>Will McAfee Eat His Own Dick ?</title>
		<meta name="description" content="A website to track if McAfee is going to be eating his own dick on live TV if Bitcoin price is not over $500k.">
		<meta name="viewport" content="width=device-width">
		<script type="text/javascript">
			$(document).ready(function(){
				
				var p = 2244.265; //principal
				var a = 500000; //goal
				var n, //number of days left
					e, //number of days elapsed
					c, //current bpi
					goalRate,
					currRate,
					percDiff,
					parPrice;
					
				var today = new Date(); //today
				var eDate = new Date("7/17/20"); //end date of bet
				var tDate = new Date("7/17/17"); //date of bet tweet
				
				function init(){
					getDaysLeft();
					getDaysElapsed();
					getCurrBpi();
				}
				init();
				
				function getDaysLeft(){
					n = dayDiff(today, eDate);
					$("#daysLeft").val(n);
					return n;
				}
				
				function getDaysElapsed(){
					e = dayDiff(tDate, today);
					$("#daysElapsed").val(e);
					return e;
				}
				
				function getCurrBpi(){
					var url = "https://api.coindesk.com/v1/bpi/currentprice.json"; 
					$.getJSON(url)
					.done(function ( json ) {
						setCurrentBpi(json.bpi.USD.rate_float);
						getGoalRate();
						getCurrRate();
						getPercDiff();
						getParPrice();
					}).fail(function (jqxhr, textStatus, error) {
						var err = textStatus + ", " + error;
						console.log( "Request Failed: " + err );
					});
					return c;
				}
				
				function setCurrentBpi(v){
					c = Math.round(v *100)/100;
					$("#currBpi").val(c);
				}
				
				//goalRate = LOG10(a/c)/(n/365)
				function getGoalRate(){
					goalRate = Math.log10(a/c)/(n/365);
					$("#goalRate").val(goalRate);
					return goalRate;
				}
				
				//currRate = LOG10(c-p)/(e/365)
				function getCurrRate(){
					currRate = Math.log10(c/p)/(e/365);
					$("#currRate").val(currRate);
					return currRate;
				}
				
				//percDiff = ((currRate-goalRate)/goalRate)*100
				function getPercDiff(){
					percDiff = ((currRate-goalRate)/goalRate)*100;
					$("#percDiff").val(Math.round(percDiff*100)/100);
					return percDiff;
				}
				
				//parPrice = 10^(goalRate * (e/365)) * p
				function getParPrice(){
					parPrice = Math.pow(10, goalRate * (e/365)) * p;
					$("#parPrice").val(Math.round(parPrice*100)/100);
					return parPrice;
				}
				
				//Returns the base log
				function getBaseLog(x ,y){
					return Math.log(y) / Math.log(x);
				}

				//Returns difference between two dates
				function dayDiff(first, second) {
					return Math.round((second-first)/(1000*60*60*24));
				}
				
			});
		</script>
	</head>
	<body>
		
		<input id="getDaysElapsed"> days elapsed</input></p>
		<input id="getDaysLeft"> days left</input></p>
		<input id="getCurrBpi"> current bpi</input></p>
		<input id="getGoalRate"> goal rate</input></p>
		<input id="getCurrRate"> current rate</input></p>
		<input id="getPercDiff"> rate difference %</input></p>
		<input id="getParPrice"> par price</input></p>
	  
	</body>

</html>
